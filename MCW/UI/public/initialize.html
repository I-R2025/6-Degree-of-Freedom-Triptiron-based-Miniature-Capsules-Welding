<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ASES System</title>
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/style_init.css" />

  <script src="js/vue.min.js"></script>
  <script src="js/roslib.min.js"></script>
  <script src="js/main.js"> </script>

</head>

<body onload="">
  <div id="overlay" style="display: none;"></div>
  <!-- Header Section -->
  <div class="container-fluid p-0">
    <header class="header">
      <div class="d-flex justify-content-around">
     <!--   <div class="logo" class="row col col-sm-12 col-lg-2" style=" height: fit-content; width: fit-content; ">
          <img src="img/logo.jpeg" alt="Logo" style="border-radius: 50px;" />
        </div>    -->   
        <h1 class="row col col-lg-10 col-sm-12" style="font-style: italic; text-align: center;font-weight: 800;
               ">
          <i>
            <span class="init-heading">
              6-Degree of Freedom Cartesian Welding System
            </span>

          </i>
        </h1>
        <div class="d-flex justify-content-around">
     <!--     <div class="logo1" class="row col col-sm-12 col-lg-2" style=" height: fit-content; width: fit-content; ">
            <img src="img/logo1.jpeg" alt="Logo" style="border-radius: 50px; background: #4c9da5;" />
          </div>-->
      </div>

    </header>
  </div>

  <!-- Main Section -->
  <main>
    <section class="container-fluid p-0">
      <!-- Top Panel Section -->
      <div class="top-panel">
        <div class="indicator-status">
          <span class="mainHeading"> <b> INDICATIONS / STATUS </b></span>
        </div>
      </div>

      <!-- Controllers Section -->
      <section class="main">
        <div style="display: flex; background-color: #6db4a7b0; justify-content: space-between; padding-inline: 8px"
          class="row">
          <div>
            <article>
              <h2>CONTROLLERS</h2>
            </article>
            <div style="gap: 22px;" class="d-flex align-items-center ms-1 justify-content-center">
              <div class="d-flex flex-column align-items-center justify-content-center">

                <p class="text-center mb-1">LINEAR-X</p>
                <div class="led d-flex flex-column align-items-center">
                  <div class="circle mb-2 mt-1" id="linx" name="LinearX"></div>
                  <p class="text-center mt-1 bold" id="status">INVALID</p>

                </div>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-center">

                <p class="text-center mb-1 bold">LINEAR-Y</p>
                <div class="led d-flex flex-column align-items-center justify-content-center"
                  >
                  <div class="circle mb-2 mt-1" id="liny" name="LinearY"></div>
                  <p class="text-center mt-1 bold" id="status">INVALID</p>
                </div>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-center">
                <p class="text-center mb-1 bold">LINEAR-X</p>

                <div class="led d-flex flex-column align-items-center justify-content-center"
                  >
                  <div class="circle mb-2 mt-1" id="linz" name="LinearZ"></div>
                  <p class="text-center mt-1 bold" id="status">INVALID</p>
                </div>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-center">

                <p class="text-center mb-1 bold">ROTATION</p>

                <div class="led d-flex flex-column align-items-center justify-content-center"
                  >
                  <div class="circle mb-2 mt-1" id="rotation" name="Rotation"></div>
                  <p class="text-center mt-1 bold" id="status">INVALID</p>
                </div>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-center">

                <p class="text-center mb-1 bold">ORIENTATION</p>
                <div class="led d-flex flex-column align-items-center justify-content-center"
                  >
                  <div class="circle initial-active mb-2 mt-1" id="orientation" name="Orientation"></div>
                  <p class="text-center mt-1 bold" id="status">INVALID</p>
                </div>
              </div>
              <div class="d-flex flex-column align-items-center justify-content-center">

                <p class="text-center mb-1 bold">GRIPPER</p>
                <div class="led d-flex flex-column align-items-center justify-content-center"
                  >
                  <div class="circle mb-2 mt-1" id="gripper" name="Gripper"></div>
                  <p class="text-center mt-1 bold" id="status">INVALID</p>
                </div>
              </div>
            </div>
          </div>
          <div class="divider">

          </div>
          <div>
            <article style="margin-right: 150px;">
              <h2>VISION</h2>
            </article>

            <div class="col d-flex align-items-center justify-content-center">
              <div style="gap:20px; margin-right: 103px;" class="d-flex align-items-center ">
                <div class="d-flex flex-column align-items-center justify-content-center ">
                  <p class=" textStyle1 text-center bold">CAM 1</p>

                  <div class="led d-flex flex-column align-items-center justify-content-center"
                    >
                    <div class="circle ledSet initial-active" id="cam1" name="CAM1"></div>
                    <p class="textStyle1 text-center mb-1  mt-2 bold" id="status">INVALID</p>
                  </div>
                </div>
                <div class="d-flex flex-column align-items-center justify-content-center ">
                  <p class=" textStyle1 text-center bold">CAM 2</p>

                  <div class="led d-flex flex-column align-items-center justify-content-center"
                    >
                    <div class="circle ledSet initial-active" id="cam2" name="CAM2"></div>
                    <p class="textStyle1 text-center mb-1  mt-2 bold" id="status">INVALID</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        </div>
      </section>

      <!-- Configuration Section -->
      <div class="container-fluid p-0">
        <div class="row">
          <div style="height: 300px;" class="col-lg-6 middle-left-half p-0">
            <!-- <h3>CONFIGURATION</h3> -->
            <span class="heading"> <b> CONFIGURATION </b></span>
            <div class="configuration">


              <div style="display:flex;">
                <div class=" ">
                  <button class="connect" mx-auto
                    onclick="disconnectConfirm(); enableButtons(); connectAndChangeLEDs(); handleButtonClick('CONNECT')"
                    id="disconnect">
                    CONNECT
                  </button>
                </div>
                 <!-- Disconnect Modal -->
            <div id="myModal1" class="modal modal-first">
              <div class="modal-content-first">
                <span class="close close-first">&times;</span>
                <p>Are you sure you want to disconnect?</p>
                <button id="yesButton">Yes</button>
                <button id="noButton">No</button>
              </div>
            </div>

                <div class="">
                  <button class="homing" onclick="handleButtonClick('HOMING'); homingFunc() " id="homing" disabled>
                    HOMING
                  </button>
                </div>
              </div>
              <div style="display: flex;" class="">
                <div class="">
                  <button class="clrfault" onclick="handleButtonClick('CLEAR FAULT'); clrFaultFunc()" id="clrfault"
                    disabled>
                    CLEAR FAULT
                  </button>
                </div>
                <div class="">
                  <button class="resetall" onclick="handleButtonClick('RESET ALL'); resetallFunc()" id="resetall"
                    disabled>
                    RESET ALL
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- Status Log Section -->

          <div class=" middle-right-half p-0;">
            <span> <b> STATUS LOG </b></span>
            <!-- <div id="logged-in"></div> -->
            <div id="log" type="text"></div>
          </div>

        </div>
      </div>

      <div class="bottom-panel container-fluid p-0">
        <div class="button-row">
          <div style="width: 180px;">
            <input type="date" id="datePicker"
              style="display: none; position: relative; background-color: steelblue;margin-right: 50px;"
              onchange="selectDate()">
          </div>
          <button id="userManagementBtn" style="margin: 0px; ">USER MANAGEMENT</button>
        </div>
        <div class="button-row">
          <button class="estop" id="estop" onclick="handleButtonClick('EMERGENCY STOP'); estopFunc()">
            EMERGENCY STOP
          </button>
          <!-- View Log Button with Calendar Icon -->
          <button class="viewlog" onclick="handleViewLog(); openBrowser()">VIEW LOG </button>
          <!-- img src="img/calendar.png" alt="Calendar"  class="calendar-icon" -->
          <div id="fileBrowser" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 20px;  border: 1px solid #784444;">
            <input type="file" id="logFileInput" style="display: none;"  onchange="handleFileSelectview()" >
          </div>    
        
          <!-- Parameter File Loading -->
          <input type="file" id="paramFile" style="display: none;" accept=".param">
          <button class="loadparam" id="loadparam" onclick="loadParameterFile()" disabled>LOAD PARAM</button>

          <!-- Procced and Exit button -->
          <button class="proceed" id="proceed" disabled="disabled" onclick="saveLogToFile(); proceed()">PROCEED</button>
          <button class="exit" onclick="exitConfirm(); handleButtonClick('EXIT')" id= "exit">EXIT</button>
        </div>
      </div>
        <!-- Exit Button Modal -->
        <div id="myModal2" class="modal modal-first">
          <div class="modal-content  modal-content-first">
            <span class="close close-exit">&times;</span>
            <p>Are you sure you want to exit?</p>
            <button id="yesExitButton">Yes</button>
            <button id="noExitButton">No</button>
          </div>
        </div> 

    </section>

    <!-- User Management Section -->

    <div id="userManagementModal" style="display: none;">
      <!-- Close button -->
      <button type="button" id="closeModalButton"
        style="position: absolute; top: 10px; right: 10px; padding:5px">&times;</button>
      <div id="changePasswordForm" style="display: none;">
        <h2>CHANGE PASSWORD</h2>
        <form id="changePassword">
          <label for="newPassword">New Password:</label>
          <input type="password" id="new-Password" name="new-Password" required>
          <label for="confirmNewPassword">Confirm Password:</label>
          <input type="password" id="confirmNewPassword" name="confirmNewPassword" required>
          <button type="submit" id="changePasswordButton">Change Password</button>
          <button type="button" id="exitModalButton">Exit</button>
        </form>
      </div>
      <!-- Exit Button Modal -->
      <div id="myexitModal" class="modal modal-second">
        <div class="modal-content  modal-content-second">
          <span class="close-second">&times;</span>
          <p>Are you sure you want to exit?</p>
          <button id="yesmodalButton">Yes</button>
          <button id="nomodalButton">No</button>
        </div>
      </div>

      <!-- User Information Form  -->
      <div id="addNewUserForm" style="display: none;">
        <h2>NEW USER INFORMATION</h2>
        <form id="addNewUser">
          <label for="newuserid">User-Id:</label>
          <input type="text" id="new-userid" name="new-userid" required>
          <label for="newPassword">Password:</label>
          <input type="password" id="newPassword" name="new-Password" required>
          <label for="newDesignation">Designation:</label>
          <input type="text" id="newDesignation" name="new-Designation" required>
          <label for="Email">Email:</label>
          <input type="email" id="newEmail" name="Email" required>
          <label for="contactInfo">Contact-No:</label>
          <input type="tel" id="contactInfo" name="Contact-Information" required>
          <label>User Role:</label>
          <input type="radio" id="userRoleUser" name="userRole" value="user" checked>
          <label for="userRoleUser">User</label>
          <input type="radio" id="userRoleAdmin" name="userRole" value="admin">
          <label for="userRoleAdmin">Admin</label>
          <button type="submit" id="addUserButton">Add User</button>
          <button type="button" id="removeUserButton">Remove User</button>

      </div>

    </div>
  </main>

  <script src="js/initial_script.js"></script>
  <script src="js/user_management.js"></script>
  <script src="js/overlay.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>

</body>

</html>